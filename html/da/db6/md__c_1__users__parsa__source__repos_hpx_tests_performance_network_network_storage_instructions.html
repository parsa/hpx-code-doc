<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HPX: instructions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HPX
   </div>
   <div id="projectbrief">High Performance ParalleX</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Not Finished yet.</p>
<p>The network storage benchmark comes with several files</p>
<h6></h6>
<h1>What the files are for</h1>
<h6></h6>
<hr/>
 <h2><a class="el" href="../../db/daa/network__storage_8cpp.html">network_storage.cpp</a> </h2>
<p>This is the code for the test. </p><hr/>
 <h2>network_storage.bat.in </h2>
<p>This is a windows batch file template which will be filled in using cmake substitution and then copied to your build/scripts directory. The generated script can be invoked to run the benchmark in serial or parallel. It spawns each task on the same node so although you may run 4 copies, they are competing for resources. The windows version is good for testing and debugging on a single node. adding or removing /B for the launch command in the script controls whether each task is launched in a new console window or not example usage (2 tasks) scripts/network_storage.bat 2 </p><hr/>
 <h2>slurm-test-HPX-storage.sh.in </h2>
<p>This is a bash script template which will be filled in using cmake substitution and then copied to your build/scripts directory. When executed, the script will loop over a number of parameter combinations and for each create a directory with a name generated from the paramaters, such as hpx-N0002-T02048-t04-ibverbs and inside the dir there will be a "submit-job.bash" script which contains a single slurm job submission. You can manually submit just one job using "sbatch submit-job.bash", or in the root of the scripts folder there will be generated another script which is called "run_jobs.bash". When this script is run, it will loop over the jobs that were created by the first script and submit them all, you can then sit back and wait until they complete. Each job will write its results into "slurm.out" (and errors to slurm.err) in the same subdirectory in which each individual job submission script was created.</p>
<p>The network_storage executable will produce several lines of output, but one line contains the condensed information needed by the plotting script. This line begins with the text "CSVData" to indicate comma separated data values. Whilst jobs are running or when they have completed, you can execute a command from the test root dir, such as find . -name slurm.out -exec grep CSV {} \; and a list of results generated from the jobs will be produced. For plotting of results, the output should be directed into a file using find . -name slurm.out -exec grep CSV {} \; &gt;results-bgq-1a-2014-04-01.csv Where you use a file name applicable to your current experiment. The generated file will be suitable for use by the plotting script.</p>
<p>Important Note: By default, the slurm jobs generated by the script have the 'exclusive' flag set. This is because the jobs are intended to test BW of the network and it is often desirable to have only a single job running at a time. The 'exclusive' flag only works (under slurm) if all jobs have the same name so in your queue you will see many identical jobs and it will take a long time to drain. If you can afford to run many job simultaneously, the job name may be set more appropriately (details in script) and the exclusive flag removed. </p><hr/>
 <h2><a class="el" href="../../d5/d57/plot-results_8py.html">plot-results.py</a> </h2>
<p>This is a python script which takes results generated by the test program as described above and plots a number of graphs for different parameter studies. The results.csv file generated contains BW measurements, timing ,thread, parcelport, block size, etc information for the plots. The python script parses the results and generates arrays (maps) of the data which can be plotted in various ways. The scripts can be invoked as <a class="el" href="../../d5/d57/plot-results_8py.html">plot-results.py</a> results.csv optional arguments such as the figure size can be found by looking at the script. The output from the script will be a series of svg and png files for each of the plots created.</p>
<h2>Launch notes</h2>
<p>greina14 bin/network_storage &ndash;localMB=1024 &ndash;transferKB=16384 &ndash;hpx:localities=2 -Ihpx.parcel.tcp.enable=1 &ndash;hpx:agas=148.187.83.44:7910 &ndash;hpx:hpx=148.187.83.44:7910 -Ihpx.parcel.tcp.enable=1 -Ihpx.parcel.mpi.enable=0 -Ihpx.parcel.verbs.enable=1 -Ihpx.parcel.bootstrap=tcp</p>
<p>greina15 bin/network_storage &ndash;localMB=1024 &ndash;transferKB=16384 &ndash;hpx:localities=2 -Ihpx.parcel.tcp.enable=1 &ndash;hpx:agas=148.187.83.44:7910 &ndash;hpx:worker &ndash;hpx:hpx=148.187.83.45:7910 -Ihpx.parcel.tcp.enable=1 -Ihpx.parcel.mpi.enable=0 -Ihpx.parcel.verbs.enable=1 -Ihpx.parcel.bootstrap=tcp</p>
<p>greina1 gdb &ndash;args /home/biddisco/build/hvtkm/bin/network_storage &ndash;localMB=64 &ndash;transferKB=1024 &ndash;hpx:localities=2 -Ihpx.parcel.tcp.enable=1 &ndash;hpx:agas=192.168.3.31:7910 &ndash;hpx:hpx=192.168.3.31:7910 -Ihpx.parcel.tcp.enable=1 -Ihpx.parcel.mpi.enable=0 -Ihpx.parcel.verbs.enable=1 -Ihpx.parcel.bootstrap=tcp &ndash;hpx:threads=1</p>
<p>greina2 gdb &ndash;args /home/biddisco/build/hvtkm/bin/network_storage &ndash;localMB=64 &ndash;transferKB=1024 &ndash;hpx:localities=2 -Ihpx.parcel.tcp.enable=1 &ndash;hpx:agas=192.168.3.31:7910 &ndash;hpx:hpx=192.168.3.32:7910 -Ihpx.parcel.tcp.enable=1 -Ihpx.parcel.mpi.enable=0 -Ihpx.parcel.verbs.enable=1 -Ihpx.parcel.bootstrap=tcp &ndash;hpx:worker &ndash;hpx:threads=1</p>
<p>mpi launch mpiexec -n 2 -host greina14,greina15 bin/network_storage &ndash;localMB=1024 &ndash;transferKB=16384 &ndash;iterations=10 &ndash;hpx:localities=2 -Ihpx.parcel.tcp.enable=1 -Ihpx.parcel.tcp.enable=0 -Ihpx.parcel.mpi.enable=1 -Ihpx.parcel.verbs.enable=0 -Ihpx.parcel.bootstrap=mpi &ndash;hpx:threads=12</p>
<p>test TCP greina14 bin/network_storage &ndash;localMB=1024 &ndash;transferKB=16384 &ndash;hpx:localities=2 -Ihpx.parcel.tcp.enable=1 &ndash;hpx:agas=148.187.83.44:7910 &ndash;hpx:hpx=148.187.83.44:7910 -Ihpx.parcel.tcp.enable=1 -Ihpx.parcel.mpi.enable=0 -Ihpx.parcel.verbs.enable=0 -Ihpx.parcel.bootstrap=tcp &ndash;iterations=10 &ndash;hpx:threads=12</p>
<p>test TCP greina15 bin/network_storage &ndash;localMB=1024 &ndash;transferKB=16384 &ndash;hpx:localities=2 -Ihpx.parcel.tcp.enable=1 &ndash;hpx:agas=148.187.83.44:7910 &ndash;hpx:worker &ndash;hpx:hpx=148.187.83.45:7910 -Ihpx.parcel.tcp.enable=1 -Ihpx.parcel.mpi.enable=0 -Ihpx.parcel.verbs.enable=0 -Ihpx.parcel.bootstrap=tcp &ndash;iterations=10 &ndash;hpx:threads=12 </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Sep 18 2017 12:02:13 for HPX by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
